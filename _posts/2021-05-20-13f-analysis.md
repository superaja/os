---
layout: post
title: "13F Filings"
description: "13F filings can provide good insights and ideas for your investment portfolio. But they have their drawbacks - from the data quality of these submissions to what is contained in these filings.I cover the high level solution description of extracting the 13f filings, processing the data, adding value added metrics and performing analysis on it."
thumb_image: "oslogo.png"
tags: [misc, businessintelligence, analytics]
---

Each quarter the SEC requires institution investment managers with more than $100M in assets under management (AUM) to list all equities assests in a form called [13F](https://www.investor.gov/introduction-investing/investing-basics/glossary/form-13f-reports-filed-institutional-investment). Form 13F is required to be filed within 45 days of the end of a calendar quarter, or if that day falls on a Saturday, Sunday or holiday, the deadline is the next business day.

Looking into the portfolios of some of smartest investors in the world of finance is an interesting exercise though you can probably [beat most of them](https://www.investopedia.com/articles/investing/030916/buffetts-bet-hedge-funds-year-eight-brka-brkb.asp) by investing in an index fund. The average retail investor does not have access to the armies of research analysts, algorithms and data infrastructure deployed by these whales. So at the least a curious mind should be intrigued about what these filings say.

Before we get too excited about this treasure trove, there are some things that need to be kept in mind. 

1. Long positions are required to be reported. Short positions are not.
2. They do not have any transactions that have been bought and sold in a reporting period and only contains the details of the equities that are on the books at the time of filings. So forget most of HFTs (High Frequency Trading) and short term trades.
3. They do not include the price at which the equitities where bought though it can be approximately deducted.
4. Despite SEC's standards, some institutional managers have errors and other data quality in their filings which the SEC does not necessarily check / enforce. 
5. Options (Call / Put) information is available but whether they were bought or sold is difficult to deduce. 

**The 13F Insights**

The structure of the 13F is well documented and the XML specifications in all its gory form are found [here](https://www.sec.gov/info/edgar/specifications/form13fxmltechspec.htm). Though I did not find it useful for my curious exercise. 

For the purpose of this discussion, the goal was be answer the following questions. 

1. What are current holdings for an institutional manager? 
2. Which were the largest buy and sell for that filing period? 
3. What is the concentration / risk and distribution across equities? 
4. What was the change in assets since the last filing period (or previous quarter)?
5. What is money inflow/outflow by industry? 
6. What is the approximate P/L Quarter Over Quarter?

..and many such interesting questions. 

**The Solution**

Unfortunately given the sheer size of the data that SEC has to handle on a daily basis, a clean API is not made available. The filings are in the form of XML and / or HTML. Hence webscrapping is the way we choose to go. The solution is fairly simple. 

A high level solution is shown below. 

{% include image.html path="13f/arch.jpg" path-detail="13f/arch.jpg" alt="The 13f high level solution architecture" %}

*Fig 1: Architecture:Zoom to view*

***Components***
1. <ins>Web scrapper</ins>: This component is responsible for navigating through multiple levels of the SEC Edgar database to identify the right links/tags and InfoTable element (the object that contains the details of the 13f transaction) and extract the information.

2. <ins>Data Loader</ins>: Collects the information from the web scrapper and stores into multiple files by the filer and the accession number.

3. <ins>Data Processor</ins>: Performs data quality checks and actions, calculates derived metrics like average price paid for an entity, Total Market Value and others and populates Sector and symbol information through 3rd party API servers. 

4. <ins>QoQ Processor</ins>: QoQ stands for Quarter over Quarter. This modules compares the 13F filings from the previous quarter to ths current quarter to determine if a filer has established a new position, added/reduced an existing position and exited from a position. In addition, it also calculates the changes in the number of shares and the market values of those shares. 

5. <ins>Meta DB</ins>: To make matters a bit easy and track the necessary status of the files in the data pipeline including error handling, the modules register the necessary information in the Meta DB thus allowing stability during code execution.

Once all the necessary data processing tasks are complete, the aggreated information is stored in a relational database and a back up of the raw files are generated (Using Drive APIs today and not S3)

The final dashboard is as below. Flexibility is also enabled via an API layer sitting in front of the relational DB.

{% include image.html path="13f/13fdash.png" path-detail="13f/13fdash.png" alt="13F Aggregated View" %}

*Fig 2: Aggregated View:Zoom to view*


**Sample Walkthrough of the Results**

Let us look at what we can deduct from Berkshire Hathaway Reports. 

{% include image.html path="13f/bhview.png" path-detail="13f/bhview.png" alt="13F Berkshire" %}

*Fig 3: Berkshire Positions:Zoom to view*

Mr. Buffet increased his holdings in Kroger (KR) and Verizon (VZ) while reduced considerably General Motors (GM) and Chevron (CVX) - not liking Auto and Oil, are we? There was no change to majority of his coveted holdings, especially Apple. Berkshire reduced its investment in the Market by almost 6 Billion - of course a drop in the bucket of a portfolio worth almost $ 300 Billion.  

As we know the current price of the asset and an approximate guess of how much the acqusition price was, we can deduct the performance of each investment just like our broker does for us. 

We lookup the industry / sector for the corresponding ticker (I used finhub API) and aggregating over a few thousand filers can provide a reasonable good indication of where the smart money is entering (or exiting)

The following view also can be built at an aggregate level across all the filings for the quarter that show the in and outflow of investments by sector / industry. 

**Final Thoughts**

As Oscar Wilde said - Imitiation is the sincerest form of flattery that mediocrity can pay to greatness. Many of these investment minds are to be respected as a few of them consistently beat the markets (Simmons) but they ain't giving their secrets away. The 13F filings are probably the nearest to gleaning at least a sliver of what may be happening in these funds. Once in a while (I personally can vouch) one can get introduced to stocks that no one knows or cares which do perform really well in the future.

But overall it is best one uses this information just as a data point and do ones own due diligence before deciding to lose (or win) in the market.


@OS

